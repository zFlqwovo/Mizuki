<svg xmlns="http://www.w3.org/2000/svg" width="800" height="1000"><defs><style>.title{font-size:18px;font-weight:700;fill:#2563eb}.small-text,.subtitle,.text,.title{font-family:Arial,sans-serif}.subtitle,.text{fill:#374151}.subtitle{font-size:14px;font-weight:700}.text{font-size:12px}.small-text{font-size:10px;fill:#6b7280}.box{fill:#f3f4f6;stroke:#d1d5db;stroke-width:2;rx:8}.config-box{fill:#dbeafe;stroke:#3b82f6}.component-box,.config-box,.process-box{stroke-width:2;rx:8}.process-box{fill:#dcfce7;stroke:#16a34a}.component-box{fill:#fef3c7;stroke:#f59e0b}.arrow{stroke-width:2}.decision-diamond{fill:#fce7f3;stroke:#ec4899;stroke-width:2}.arrow{stroke:#374151;fill:none;marker-end:url(#arrowhead)}.arrow-error,.arrow-success{stroke-width:2;fill:none}.arrow-success{stroke:#16a34a;marker-end:url(#arrowhead-success)}.arrow-error{stroke:#dc2626;marker-end:url(#arrowhead-error)}</style><marker id="arrowhead" markerHeight="7" markerWidth="10" orient="auto" refX="9" refY="3.5"><polygon fill="#374151" points="0 0 10 3.5 0 7"/></marker><marker id="arrowhead-success" markerHeight="7" markerWidth="10" orient="auto" refX="9" refY="3.5"><polygon fill="#16a34a" points="0 0 10 3.5 0 7"/></marker><marker id="arrowhead-error" markerHeight="7" markerWidth="10" orient="auto" refX="9" refY="3.5"><polygon fill="#dc2626" points="0 0 10 3.5 0 7"/></marker></defs><text x="400" y="30" class="title" text-anchor="middle">组件配置加载流程图</text><text x="400" y="50" class="small-text" text-anchor="middle">Widget Configuration Loading Flowchart</text><ellipse cx="400" cy="90" class="box" rx="60" ry="25"/><text x="400" y="95" class="subtitle" text-anchor="middle">开始</text><rect width="160" height="60" x="320" y="140" class="config-box"/><text x="400" y="160" class="subtitle" text-anchor="middle">加载配置文件</text><text x="400" y="175" class="text" text-anchor="middle">src/config.ts</text><text x="400" y="190" class="text" text-anchor="middle">src/types/config.ts</text><rect width="160" height="60" x="320" y="230" class="process-box"/><text x="400" y="250" class="subtitle" text-anchor="middle">初始化组件管理器</text><text x="400" y="265" class="text" text-anchor="middle">WidgetManager</text><text x="400" y="280" class="text" text-anchor="middle">加载 sidebarLayoutConfig</text><polygon points="400 320 460 350 400 380 340 350" class="decision-diamond"/><text x="400" y="345" class="text" text-anchor="middle">配置</text><text x="400" y="360" class="text" text-anchor="middle">验证</text><rect width="120" height="60" x="520" y="320" class="box" style="fill:#fee2e2;stroke:#dc2626"/><text x="580" y="340" class="subtitle" text-anchor="middle">错误处理</text><text x="580" y="355" class="text" text-anchor="middle">显示错误信息</text><text x="580" y="370" class="text" text-anchor="middle">使用默认配置</text><rect width="160" height="60" x="320" y="420" class="process-box"/><text x="400" y="440" class="subtitle" text-anchor="middle">筛选启用组件</text><text x="400" y="455" class="text" text-anchor="middle">enable: true</text><text x="400" y="470" class="text" text-anchor="middle">响应式检查</text><rect width="160" height="60" x="320" y="510" class="process-box"/><text x="400" y="530" class="subtitle" text-anchor="middle">组件排序</text><text x="400" y="545" class="text" text-anchor="middle">按 order 排序</text><text x="400" y="560" class="text" text-anchor="middle">按 position 分组</text><rect width="140" height="60" x="200" y="600" class="component-box"/><text x="270" y="620" class="subtitle" text-anchor="middle">Top 组件</text><text x="270" y="635" class="text" text-anchor="middle">position: &apos;top&apos;</text><text x="270" y="650" class="text" text-anchor="middle">固定在顶部</text><rect width="140" height="60" x="460" y="600" class="component-box"/><text x="530" y="620" class="subtitle" text-anchor="middle">Sticky 组件</text><text x="530" y="635" class="text" text-anchor="middle">position: &apos;sticky&apos;</text><text x="530" y="650" class="text" text-anchor="middle">粘性定位</text><rect width="160" height="60" x="320" y="700" class="process-box"/><text x="400" y="720" class="subtitle" text-anchor="middle">动态加载组件</text><text x="400" y="735" class="text" text-anchor="middle">componentMap 映射</text><text x="400" y="750" class="text" text-anchor="middle">Astro 组件导入</text><rect width="160" height="60" x="320" y="790" class="process-box"/><text x="400" y="810" class="subtitle" text-anchor="middle">应用样式和动画</text><text x="400" y="825" class="text" text-anchor="middle">CSS 类名生成</text><text x="400" y="840" class="text" text-anchor="middle">动画延迟计算</text><rect width="160" height="60" x="320" y="880" class="component-box"/><text x="400" y="900" class="subtitle" text-anchor="middle">渲染组件</text><text x="400" y="915" class="text" text-anchor="middle">DynamicSideBar.astro</text><text x="400" y="930" class="text" text-anchor="middle">DOM 输出</text><ellipse cx="400" cy="980" class="box" rx="60" ry="25"/><text x="400" y="985" class="subtitle" text-anchor="middle">完成</text><line x1="400" x2="400" y1="115" y2="140" class="arrow"/><line x1="400" x2="400" y1="200" y2="230" class="arrow"/><line x1="400" x2="400" y1="290" y2="320" class="arrow"/><line x1="460" x2="520" y1="350" y2="350" class="arrow-error"/><text x="490" y="345" class="small-text" text-anchor="middle">失败</text><line x1="400" x2="400" y1="380" y2="420" class="arrow-success"/><text x="420" y="400" class="small-text" text-anchor="middle">成功</text><line x1="580" x2="580" y1="380" y2="400" class="arrow"/><line x1="580" x2="400" y1="400" y2="400" class="arrow"/><line x1="400" x2="400" y1="480" y2="510" class="arrow"/><line x1="400" x2="400" y1="570" y2="590" class="arrow"/><line x1="350" x2="270" y1="590" y2="600" class="arrow"/><line x1="450" x2="530" y1="590" y2="600" class="arrow"/><line x1="270" x2="350" y1="660" y2="690" class="arrow"/><line x1="530" x2="450" y1="660" y2="690" class="arrow"/><line x1="400" x2="400" y1="760" y2="790" class="arrow"/><line x1="400" x2="400" y1="850" y2="880" class="arrow"/><line x1="400" x2="400" y1="940" y2="955" class="arrow"/><g transform="translate(50, 200)"><rect width="200" height="120" x="0" y="0" class="box" style="fill:#f9fafb;stroke:#e5e7eb;stroke-dasharray:5,5"/><text x="100" y="20" class="subtitle" text-anchor="middle">配置文件结构</text><text x="10" y="40" class="small-text">• SidebarLayoutConfig</text><text x="10" y="55" class="small-text">• WidgetComponentConfig[]</text><text x="10" y="70" class="small-text">• 响应式断点设置</text><text x="10" y="85" class="small-text">• 动画配置</text><text x="10" y="100" class="small-text">• 自定义属性</text></g><g transform="translate(550, 450)"><rect width="200" height="140" x="0" y="0" class="box" style="fill:#f9fafb;stroke:#e5e7eb;stroke-dasharray:5,5"/><text x="100" y="20" class="subtitle" text-anchor="middle">组件类型</text><text x="10" y="40" class="small-text">• profile (用户资料)</text><text x="10" y="55" class="small-text">• announcement (公告)</text><text x="10" y="70" class="small-text">• categories (分类)</text><text x="10" y="85" class="small-text">• tags (标签)</text><text x="10" y="100" class="small-text">• toc (目录)</text><text x="10" y="115" class="small-text">• music-player (音乐)</text><text x="10" y="130" class="small-text">• custom (自定义)</text></g><g transform="translate(50, 700)"><rect width="200" height="100" x="0" y="0" class="box" style="fill:#f9fafb;stroke:#e5e7eb;stroke-dasharray:5,5"/><text x="100" y="20" class="subtitle" text-anchor="middle">响应式检查</text><text x="10" y="40" class="small-text">• 获取当前设备类型</text><text x="10" y="55" class="small-text">• 检查断点配置</text><text x="10" y="70" class="small-text">• 过滤不适用组件</text><text x="10" y="85" class="small-text">• 应用设备特定样式</text></g><g transform="translate(50, 850)"><text x="0" y="0" class="subtitle">图例说明</text><rect width="20" height="15" x="0" y="10" class="config-box"/><text x="25" y="22" class="small-text">配置相关</text><rect width="20" height="15" x="0" y="30" class="process-box"/><text x="25" y="42" class="small-text">处理流程</text><rect width="20" height="15" x="100" y="10" class="component-box"/><text x="125" y="22" class="small-text">组件相关</text><polygon points="100 35 110 40 100 45 90 40" class="decision-diamond"/><text x="125" y="42" class="small-text">判断节点</text></g></svg>